"use client";
import { motion } from "framer-motion";
import Image from "next/image";
import React, { useState } from "react";

function CourseCard() {
  const [key, setKey] = useState(Math.random());
  return (
    <div className="relative max-w-[297px] rounded bg-white p-4">
      <Image
        src="/servers.png"
        width={297}
        height={43}
        className="absolute inset-0 h-[43px] w-full rounded-t object-cover"
        alt="servers"
      />

      <div className="relative flex min-h-[53px] items-end justify-between">
        <div className="rounded-full bg-[#F7F8F9] p-2 shadow-[0_3px_12px_0_rgb(0_0_0_/_0.1)]">
          <AngularIcon />
        </div>

        <div className="flex items-center gap-1">
          <LoadIcon />
          <span className="text-sm text-stone-500">63%</span>
        </div>
      </div>

      <div className="mt-4">
        <div className="flex justify-between">
          <div className="flex items-center gap-1">
            <ClockIcon />
            <span className="text-[11px]/[15px] font-light text-slate-500">
              Week 4
            </span>
          </div>

          <div className="flex items-center gap-1">
            {Array(3)
              .fill(0)
              .map((_, index) => (
                <RobotIcon
                  fill={index !== 2}
                  delay={index * 0.2}
                  key={index + key}
                />
              ))}

            <span className="text-[11px]/[15px] font-light text-[#191D23]">
              Medium
            </span>
          </div>
        </div>

        <span className="mt-2 block text-base/[22px] font-bold text-[#191D23]">
          Advanced Security Course
        </span>

        <span className="mt-1 block text-[13px]/[18px] text-[#191D23]">
          Presented by Acme
        </span>

        <p className="mt-4 text-base/[22px] text-[#191D23]">
          Cyber security is the practice of defending computers, servers, mobile
          devices, electronic systems, networks, and data from malicious
          attacks. It&lsquo;s also known as information technology security or
          electronic information security.
        </p>

        <button
          className="mt-4 min-h-11 w-full rounded bg-emerald-700 px-3 py-[6px] text-base/5 font-semibold text-white"
          onClick={() => setKey(Math.random())}
        >
          Continue
        </button>
      </div>
    </div>
  );
}

const AngularIcon = () => {
  return (
    <svg
      width="24"
      height="26"
      viewBox="0 0 24 26"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clipPath="url(#clip0_6_13843)">
        <path
          d="M0.00927734 4.35139L11.8038 0.0666504L23.9159 4.27521L21.9547 20.1859L11.8038 25.9179L1.81162 20.2621L0.00927734 4.35139Z"
          fill="#E23237"
        />
        <path
          d="M23.9161 4.27521L11.804 0.0666504V25.9179L21.9549 20.1954L23.9161 4.27521Z"
          fill="#B52E31"
        />
        <path
          d="M11.8225 3.08496L4.47314 19.7574L7.21861 19.7098L8.69414 15.9487H15.2871L16.9027 19.7574L19.5268 19.805L11.8225 3.08496ZM11.8412 8.42662L14.3252 13.7206H9.65593L11.8412 8.42662Z"
          fill="white"
        />
      </g>
    </svg>
  );
};

const LoadIcon = () => {
  return (
    <svg
      width="18"
      height="18"
      viewBox="0 0 18 18"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M18 9C18 13.9706 13.9706 18 9 18C4.02944 18 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9ZM2.20516 9C2.20516 12.7527 5.24731 15.7948 9 15.7948C12.7527 15.7948 15.7948 12.7527 15.7948 9C15.7948 5.24731 12.7527 2.20516 9 2.20516C5.24731 2.20516 2.20516 5.24731 2.20516 9Z"
        fill="#D0D5DD"
      />
      <path
        d="M9.28234 16.8924C9.30411 17.5009 8.82686 18.0189 8.22021 17.9662C7.20148 17.8776 6.20254 17.6157 5.26718 17.1894C3.99641 16.6102 2.87786 15.7431 2.00006 14.6569C1.12226 13.5707 0.509275 12.2951 0.209618 10.9311C-0.0900388 9.56708 -0.0681484 8.15202 0.273557 6.79791C0.615263 5.4438 1.26741 4.18779 2.17839 3.12926C3.08937 2.07072 4.2342 1.23872 5.52228 0.699068C6.81036 0.159419 8.20636 -0.0730654 9.59982 0.0200099C10.6255 0.0885184 11.629 0.332023 12.5678 0.737397C13.1269 0.978795 13.3012 1.66122 12.9933 2.18657C12.6854 2.71193 12.0118 2.87873 11.4436 2.65975C10.8078 2.41472 10.1368 2.26595 9.45285 2.22027C8.40082 2.15 7.34686 2.32552 6.37438 2.73295C5.4019 3.14037 4.53758 3.76852 3.84981 4.56769C3.16203 5.36687 2.66967 6.31513 2.41169 7.33746C2.15371 8.35979 2.13718 9.42813 2.36342 10.458C2.58965 11.4878 3.05244 12.4508 3.71517 13.2709C4.3779 14.0909 5.22238 14.7455 6.18179 15.1828C6.80556 15.4672 7.46678 15.6546 8.14267 15.7405C8.74675 15.8174 9.26057 16.2838 9.28234 16.8924Z"
        fill="#047857"
      />
      <circle cx="12.1306" cy="1.56522" r="1.56522" fill="#047857" />
    </svg>
  );
};

const ClockIcon = () => {
  return (
    <svg
      width="16"
      height="16"
      viewBox="0 0 16 16"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clipPath="url(#clip0_6_13857)">
        <path
          d="M7.99992 14.6666C11.6818 14.6666 14.6666 11.6818 14.6666 7.99992C14.6666 4.31802 11.6818 1.33325 7.99992 1.33325C4.31802 1.33325 1.33325 4.31802 1.33325 7.99992C1.33325 11.6818 4.31802 14.6666 7.99992 14.6666Z"
          stroke="#64748B"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M10 10.6667L8.39067 9.05733C8.1406 8.80734 8.00008 8.46826 8 8.11467V4"
          stroke="#64748B"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </g>
      <defs>
        <clipPath id="clip0_6_13857">
          <rect width="16" height="16" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
};

const RobotIcon = ({
  fill = true,
  delay,
}: {
  fill?: boolean;
  delay?: number;
}) => {
  return (
    <svg
      className="h-2 w-[10px]"
      viewBox="0 0 10 8"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <motion.path
        d="M0.5 3.5H1V6.5H0.5C0.434317 6.50008 0.369264 6.4872 0.308566 6.4621C0.247868 6.437 0.192718 6.40017 0.146273 6.35373C0.0998278 6.30728 0.0630011 6.25213 0.0379014 6.19143C0.0128018 6.13074 -7.77843e-05 6.06568 3.53411e-07 6V4C-7.77843e-05 3.93432 0.0128018 3.86926 0.0379014 3.80857C0.0630011 3.74787 0.0998278 3.69272 0.146273 3.64627C0.192718 3.59983 0.247868 3.563 0.308566 3.5379C0.369264 3.5128 0.434317 3.49992 0.5 3.5ZM8.5 2.75V7C8.49974 7.26514 8.3943 7.51934 8.20682 7.70682C8.01934 7.8943 7.76514 7.99974 7.5 8H2.5C2.23486 7.99974 1.98066 7.8943 1.79318 7.70682C1.6057 7.51934 1.50026 7.26514 1.5 7V2.75C1.49995 2.58583 1.53224 2.42326 1.59504 2.27158C1.65784 2.1199 1.74991 1.98208 1.866 1.866C1.98208 1.74991 2.1199 1.65784 2.27158 1.59504C2.42326 1.53224 2.58583 1.49995 2.75 1.5H4.5V0.5C4.5 0.367392 4.55268 0.240215 4.64645 0.146447C4.74021 0.0526784 4.86739 0 5 0C5.13261 0 5.25979 0.0526784 5.35355 0.146447C5.44732 0.240215 5.5 0.367392 5.5 0.5V1.5H7.25C7.41417 1.49995 7.57674 1.53224 7.72842 1.59504C7.8801 1.65784 8.01792 1.74991 8.134 1.866C8.25009 1.98208 8.34216 2.1199 8.40496 2.27158C8.46776 2.42326 8.50005 2.58583 8.5 2.75ZM4.125 4C4.125 3.87639 4.08834 3.75555 4.01967 3.65277C3.95099 3.54999 3.85338 3.46988 3.73918 3.42258C3.62497 3.37527 3.49931 3.36289 3.37807 3.38701C3.25683 3.41112 3.14547 3.47065 3.05806 3.55806C2.97065 3.64547 2.91112 3.75683 2.88701 3.87807C2.86289 3.99931 2.87527 4.12497 2.92258 4.23918C2.96988 4.35338 3.04999 4.45099 3.15277 4.51967C3.25555 4.58834 3.37639 4.625 3.5 4.625C3.58208 4.62501 3.66335 4.60884 3.73918 4.57744C3.81502 4.54603 3.88392 4.49999 3.94196 4.44196C3.99999 4.38392 4.04603 4.31502 4.07744 4.23918C4.10884 4.16335 4.12501 4.08208 4.125 4ZM4 6H3V6.5H4V6ZM5.5 6H4.5V6.5H5.5V6ZM7.125 4C7.125 3.87639 7.08834 3.75555 7.01967 3.65277C6.95099 3.54999 6.85338 3.46988 6.73918 3.42258C6.62497 3.37527 6.49931 3.36289 6.37807 3.38701C6.25683 3.41112 6.14547 3.47065 6.05806 3.55806C5.97065 3.64547 5.91112 3.75683 5.88701 3.87807C5.86289 3.99931 5.87527 4.12497 5.92258 4.23918C5.96988 4.35338 6.04999 4.45099 6.15277 4.51967C6.25555 4.58834 6.37639 4.625 6.5 4.625C6.58208 4.62501 6.66335 4.60884 6.73918 4.57744C6.81502 4.54603 6.88392 4.49999 6.94196 4.44196C6.99999 4.38392 7.04603 4.31502 7.07744 4.23918C7.10884 4.16335 7.12501 4.08208 7.125 4ZM7 6H6V6.5H7V6ZM10 4V6C10.0001 6.06568 9.9872 6.13074 9.9621 6.19143C9.937 6.25213 9.90017 6.30728 9.85373 6.35373C9.80728 6.40017 9.75213 6.437 9.69143 6.4621C9.63073 6.4872 9.56568 6.50008 9.5 6.5H9V3.5H9.5C9.56568 3.49992 9.63073 3.5128 9.69143 3.5379C9.75213 3.563 9.80728 3.59983 9.85373 3.64627C9.90017 3.69272 9.937 3.74787 9.9621 3.80857C9.9872 3.86926 10.0001 3.93432 10 4Z"
        initial={{
          opacity: 0,
          fill: "#D0D5DD",
        }}
        animate={{
          fill: fill ? "#191D23" : "#D0D5DD",
          opacity: 1,
          transition: {
            ease: "easeInOut",
            delay: delay ?? undefined,
          },
        }}
      />
    </svg>
  );
};

export default CourseCard;
